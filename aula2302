Link to simulation: https://wokwi.com/projects/456756909438228481

#include <Arduino.h>

static const int LED_PIN = 2;
bool led_state = false;
unsigned long last = 0;
unsigned long lastPrint = 0;

// Tarefa 1 - Pisca LED a cada 500ms
void blink_led ()
{
  unsigned long now = millis();
  if (now - last >= 500) {
    if (led_state == false) {
      digitalWrite(LED_PIN, LOW);
      led_state = true;
    }
    else {
      digitalWrite(LED_PIN, HIGH);
      led_state = false;
    }

    Serial.printf("[millis] periodo = %lu ms\n", (now - last));
    last = now;
  }
}

// Tarefa 2 - Processa alguma coisa
void process_anything ()
{
  unsigned long temp0 = micros();
  for (volatile int i = 0; i < 50; i++) {}
  unsigned long temp1 = micros() - temp0;

  if (millis() - lastPrint >= 2000) {
    lastPrint = millis();
    Serial.printf("[micros] periodo = %lu us\n", temp1);
  }
}

void setup() {
  Serial.begin(115200);
  pinMode(LED_PIN, OUTPUT);
}

void loop() {
  blink_led();
  process_anything();
}
